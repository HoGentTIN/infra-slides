<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Bert Van Vreckem">
  <title>Infrastructure Automation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/dist/reset.css">
  <link rel="stylesheet" href="reveal.js/dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: 1;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="reveal.js/dist/theme/hogent.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Infrastructure Automation</h1>
  <p class="subtitle">HOGENT applied computer science</p>
  <p class="author">Bert Van Vreckem</p>
  <p class="date">2022-2023</p>
</section>

<section>
<section id="intro" class="title-slide slide level1">
<h1>Intro</h1>

</section>
<section id="wednesday-10-march-2021-0131" class="slide level2">
<h2>Wednesday 10 March 2021, 01:31</h2>
<p><a href="https://inuits.eu/">Inuits</a> on-call team notices some VMs
are gone</p>
</section>
<section id="these-are-production-systems" class="slide level2">
<h2>These are production systems!</h2>
</section>
<section id="they-arent-coming-back-any-time-soon" class="slide level2">
<h2>They aren’t coming back any time soon…</h2>
</section>
<section id="wednesday-10-march-0342" class="slide level2">
<h2>Wednesday 10 March, 03:42</h2>
<center>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
We have a major incident on SBG2. The fire declared in the building.
Firefighters were immediately on the scene but could not control the
fire in SBG2. The whole site has been isolated which impacts all
services in SGB1-4. We recommend to activate your Disaster Recovery
Plan.
</p>
— Octave Klaba (<span class="citation"
data-cites="olesovhcom">@olesovhcom</span>)
<a href="https://twitter.com/olesovhcom/status/1369478732247932929?ref_src=twsrc%5Etfw">March
10, 2021</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>
</section>
<section id="the-situation" class="slide level2">
<h2>The situation</h2>
<ul>
<li><a href="https://www.ovhcloud.com/nl/">OVHcloud</a> is a cloud
provider</li>
<li>32 datacenters over 4 continents</li>
<li>a.o. in Strasbourg (SBG)</li>
</ul>
</section>
<section class="slide level2">

<p><img
data-src="https://static.reuters.com/resources/r/?m=02&amp;d=20210310&amp;t=2&amp;i=1554440499&amp;r=LYNXMPEH290XD&amp;w=2048" /></p>
</section>
<section class="slide level2">

<p><img
data-src="https://static.reuters.com/resources/r/?m=02&amp;d=20210310&amp;t=2&amp;i=1554440500&amp;r=LYNXMPEH290XE&amp;w=2048" /></p>
</section>
<section class="slide level2">

<p><img
data-src="https://static.reuters.com/resources/r/?m=02&amp;d=20210310&amp;t=2&amp;i=1554440501&amp;r=LYNXMPEH290XF&amp;w=2048" /></p>
</section>
<section class="slide level2">

<p><img
data-src="https://www.techzine.nl/wp-content/uploads/2021/03/20210310-ovhcloud-brand.jpg" /></p>
</section>
<section id="so-your-servers-are-gone.-now-what" class="slide level2">
<h2>So, your servers are <em>gone</em>. Now what?</h2>
</section>
<section id="what-happened" class="slide level2">
<h2>What happened?</h2>
<ul>
<li>Probably a failed Uninterruptible Power Source (UPS)</li>
<li>3,6M websites, 464K domains gone</li>
<li>Effect on businesses <em>and</em> governments</li>
<li>No disaster recovery plan? Bye, bye data!</li>
</ul>
</section>
<section id="the-situation-at-inuits" class="slide level2">
<h2>The situation at Inuits</h2>
<ul>
<li>130 VMs over 12 servers gone</li>
<li>Most problems mitigated by automatic failover to other
datacenters</li>
<li>A few “problem cases”</li>
</ul>
</section>
<section id="case-1" class="slide level2">
<h2>Case 1</h2>
<ul>
<li>VIP customer, failover fails</li>
<li>Manual DNS record adaption needed for load balancer</li>
<li>1h lost: customer had to do a DNS record change themselves</li>
</ul>
</section>
<section id="case-2" class="slide level2">
<h2>Case 2</h2>
<ul>
<li>Customer spread over 2 DCs</li>
<li>Entire infrastructure reconstructed at other ISP <strong>before
9:00</strong></li>
<li>Without notification, customer would not have noticed anything…</li>
</ul>
</section>
<section id="impact-on-inuits" class="slide level2">
<h2>Impact on Inuits</h2>
<ul>
<li><strong>No loss of data!</strong></li>
<li>Most problems solved before start business hours</li>
</ul>
</section>
<section id="whats-their-secret" class="slide level2">
<h2>What’s their “secret”?</h2>
<ul>
<li><strong>Infrastructure as Code</strong>
<ul>
<li>Configuration Management</li>
<li>Build pipelines for everything!</li>
</ul></li>
<li>Cloud native
<ul>
<li>No owned HW</li>
<li>Multi-cloud, cloud-agnostic</li>
</ul></li>
<li>High Availability by design</li>
</ul>
</section>
<section id="references" class="slide level2">
<h2>References</h2>
<ul>
<li>Buytaert, K. (2020-06-17) <a
href="https://www.slideshare.net/KrisBuytaert/help-my-datacenter-is-on-fire">Help,
my datacenter is on fire!</a>. StackConf 2021. <a
href="https://youtu.be/zDfH0DpHT3s"
class="uri">https://youtu.be/zDfH0DpHT3s</a></li>
<li>Rosemain, M. &amp; Satter, R. (2021-03-10) <a
href="https://www.reuters.com/article/us-france-ovh-fire-idUSKBN2B20NU">Millions
of websites offline after fire at French cloud services firm</a>.
Reuters</li>
<li>Witteman, E. (2021-03-15) <a
href="https://www.techzine.eu/news/infrastructure/56935/ovh-fire-may-be-caused-by-faulty-ups/">OVH
fire may be caused by faulty UPS</a></li>
</ul>
</section></section>
<section>
<section id="infrastructure-automation"
class="title-slide slide level1">
<h1>Infrastructure Automation</h1>

</section>
<section id="infrastructure-automation-1" class="slide level2">
<h2>Infrastructure Automation</h2>
<p>Also called:</p>
<ul>
<li>Infrastructure as Code</li>
<li>GitOps</li>
<li>DevOps</li>
</ul>
</section>
<section id="server-life-cycle" class="slide level2">
<h2>Server life cycle</h2>
<p>What are the different phases in the life of a server(-VM)?</p>
</section>
<section id="tooling-13" class="slide level2">
<h2>Tooling (1/3)</h2>
<p>Tools for server lifecycle management:</p>
<ul>
<li><strong>Provisioning:</strong> empty machine → JEOS
<ul>
<li>Packer, Docker, …</li>
</ul></li>
<li><strong>Configuration Management:</strong> JEOS → production-ready
<ul>
<li>Ansible, Puppet, Chef, CFEngine, SaltStack, …</li>
</ul></li>
</ul>
</section>
<section id="tooling-23" class="slide level2">
<h2>Tooling (2/3)</h2>
<ul>
<li><strong>Software Delivery</strong>/Release engineering
<ul>
<li>CI/CD: Jenkins, Travis CI, Circle CI, Gitlab CI, Github Actions,
…</li>
<li>Packaging: rpmbuild, dpkg-deb, fpm</li>
<li>Package mgmt: RPM, deb, npm, RubyGems, pip, Helm, Chocolatey, NuGet,
…</li>
<li>Repository management: Pulp</li>
</ul></li>
</ul>
</section>
<section id="tooling-33" class="slide level2">
<h2>Tooling (3/3)</h2>
<ul>
<li><strong>Orchestration:</strong> manage systems in production
<ul>
<li>Ansible, SaltStack, Kubernetes, …</li>
</ul></li>
<li><strong>Monitoring:</strong>
<ul>
<li>Traditional: Icinga, Nagios, …</li>
<li>Time Series DB: Prometheus, collectd, Cacti, …</li>
<li>Logging: Elastic stack, Splunk, Fluentd, …</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="study-guide" class="title-slide slide level1">
<h1>Study Guide</h1>

</section>
<section id="study-guide-1" class="slide level2">
<h2>Study Guide</h2>
<p>See Chamilo course for detailed info!</p>
</section>
<section id="course-within-the-curriculum" class="slide level2">
<h2>Course within the curriculum</h2>
<p><img data-src="assets/infra-plaats-curriculum.png" /></p>
</section>
<section id="learning-goals-and-competencies" class="slide level2">
<h2>Learning goals and competencies</h2>
<ul>
<li><strong>Configuration Management Systems</strong>
<ul>
<li>Ansible</li>
</ul></li>
<li>Setting up <strong>reproducible virtual environments</strong>
<ul>
<li>Vagrant, Docker, Docker-compose</li>
</ul></li>
<li><strong>CI/CD</strong>: Jenkins</li>
<li><strong>Orchestration</strong>
<ul>
<li>Ansible, Docker-compose, (Kubernetes)</li>
</ul></li>
<li><strong>Monitoring, logs</strong>
<ul>
<li>Cockpit, Portainer, journalctl</li>
</ul></li>
</ul>
<p><span style="color:red"><strong>Remark: 2021-2022 is a transition
year!</strong></span></p>
</section>
<section id="course-contents" class="slide level2">
<h2>Course contents</h2>
<ul>
<li>Intro, setting up a work environment</li>
<li>M1. Continuous Integration/Delivery</li>
<li>M2. Configuration management</li>
<li>M3. Container orchestration</li>
<li>M4. Monitoring</li>
</ul>
</section>
<section id="learning-materials" class="slide level2">
<h2>Learning materials</h2>
<ul>
<li>Start with the overview in the Chamilo course</li>
<li>Github: <a href="https://hogenttin.github.io/infra-slides/">lecture
slides</a>, <a href="https://github.com/HoGentTIN/infra-demo">demo
environment</a>, <a href="https://github.com/HoGentTIN/infra-labs">lab
assignments</a></li>
<li>Online manuals of software used</li>
<li>Video recordings of classroom instruction (Dutch)</li>
<li>(Books - see study guide on Chamilo)</li>
</ul>
</section>
<section id="software-needed" class="slide level2">
<h2>Software needed</h2>
<pre class="console"><code>PS&gt; choco install git
PS&gt; choco install vscode
PS&gt; choco install virtualbox
PS&gt; choco install vagrant</code></pre>
<p>(Mac, Linux: see study guide on Chamilo)</p>
</section>
<section id="software-continuation" class="slide level2">
<h2>Software (continuation)</h2>
<ul>
<li>VSCode: install recommended plugins (see study guide)</li>
<li>VirtualBox: Extension Pack!</li>
<li>Git client: also install Git Bash!</li>
</ul>
</section>
<section id="teaching-methods" class="slide level2">
<h2>Teaching methods</h2>
<ul>
<li>Classroom instruction, demonstration</li>
<li>Lab assignments</li>
</ul>
</section>
<section id="class-sessions" class="slide level2">
<h2>Class sessions</h2>
<ul>
<li>Code <span style="color:green;font-weight:bold">green</span>:
on-campus, see class schedule</li>
<li>Code <span style="color:yellow;font-weight:bold">yellow</span>/<span
style="color:orange;font-weight:bold">orange</span>/<span
style="color:red;font-weight:bold">red</span>: on-line, Teams
session</li>
</ul>
</section>
<section id="tutoring" class="slide level2">
<h2>Tutoring</h2>
<ul>
<li>Individual guidance for lab assignments</li>
<li>Ask questions <em>during class sessions</em></li>
<li>Outside class: <em>general Teams channel</em></li>
<li>Only for personal questions: <em>e-mail/Teams chat</em></li>
</ul>
</section>
<section id="semester-schedule" class="slide level2">
<h2>Semester schedule</h2>
<ol type="1">
<li>intro, Software install, M1. Continuous Integration/Delivery</li>
<li>(continued)</li>
<li>M2. Configuration management</li>
<li>(continued)</li>
<li>(continued)</li>
<li>(continued)</li>
</ol>
</section>
<section id="semester-schedule-1" class="slide level2">
<h2>Semester schedule</h2>
<ol start="7" type="1">
<li>M3. Container Orchestration</li>
<li>(continued)</li>
<li>(continued)</li>
<li>M4. Monitoring</li>
<li>(continued)</li>
<li>Troubleshooting-lab 2</li>
<li>Optional: catch-up session</li>
</ol>
</section>
<section id="assessment" class="slide level2">
<h2>Assessment</h2>
<ul>
<li><strong>Portfolio</strong>:
<ul>
<li>Github repo with source code and reports</li>
</ul></li>
<li><strong>Demonstrations</strong>:
<ul>
<li>During the semester (at least 3x)</li>
<li>End result (exam period or W13)</li>
</ul></li>
</ul>
</section>
<section id="resit" class="slide level2">
<h2>Resit</h2>
<p>Personal assignment, no support</p>
<ul>
<li>finish lab assignments</li>
<li>extra assignment (Chaos Engineering)</li>
</ul>
</section>
<section id="questions" class="slide level2">
<h2>Questions?</h2>
</section></section>
    </div>
  </div>

  <script src="reveal.js/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="reveal.js/plugin/notes/notes.js"></script>
  <script src="reveal.js/plugin/search/search.js"></script>
  <script src="reveal.js/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
